#!/bin/bash

if [ $(id -u) -eq 0 ]
then
        clear
else
        if echo $(id) |grep sudo > /dev/null
        then
        clear
        echo "Voce não é root"
        echo "Seu usuario esta no grupo sudo"
        echo -e "Para virar root execute \033[1;31msudo su\033[0m"
        pack
        exit
        else
        clear
        echo -e "Vc nao esta como usuario root, nem com seus direitos (sudo)\nPara virar root execute \033[1;31msu\033[0m e digite sua senha root"
        pack
        exit
        fi
fi

if [ -d /etc/VpsPackdir ]
then
echo ""
else
mkdir /etc/VpsPackdir
fi

if [ -d /etc/VpsPackdir/senha ]
then
echo ""
else
mkdir /etc/VpsPackdir/senha
fi

if [ -d /etc/VpsPackdir/limite ]
then
echo ""
else
mkdir /etc/VpsPackdir/limite
fi

if [ -d /etc/VpsPackdir/date ]
then
echo ""
else
mkdir /etc/VpsPackdir/date
fi

if [ -d /etc/VpsPackdir/UsuariosADM ]
then
echo ""
else
mkdir /etc/VpsPackdir/UsuariosADM
fi

function configurarsquid(){
clear
cat -n /etc/issue |grep 1 |cut -d' ' -f6,7,8 |sed 's/1//' |sed 's/	//' > /etc/so 
if [ -f /etc/lsb-release ]
then
sistema=$(cat /etc/lsb-release |grep "DISTRIB_DESCRIPTION" | awk -F = '{print $2}' |sed 's/"//g')
else
sistema=Null
fi
echo -e "\033[1;31mPara que la instalacion sea correcta se necesita una ip.
Digite su ip !\033[0m"
read -p ": " ip
clear
echo -e "\033[1;31m-----> \033[01;37mScript VPSPACK 2.3 Mnahkl\033[0m"
echo -e "\033[1;31m-----> \033[01;37mSistema:\033[1;31m $sistema"
echo -e "\033[1;31m-----> \033[01;37mSu ip agregada:\033[1;31m $ip"
echo -e "\033[1;31m-----> \033[1;37mSQUID:\033[1;31m 80, 8080, 8799, 3128\033[0m"
echo -e "\033[1;31m-----> \033[1;37mSSH Puertos: \033[1;31m443, 22\033[0m"
echo -e "\033[1;31m-----> \033[1;37mDropbear Puertos: \033[1;31m444\033[0m"
echo -e "\033[1;31m-----> \033[1;37mSSH IPS/Hosts: \033[1;31m$ip, localhost, 127.0.0.1\033[0m"
clear


echo -e "\033[1;37m VpsPacket © Script modificado por: \033[2;32mManahkl \033[0m"
echo -e "\033[1;37mEscogj las Opciones:    \033[1;37mPara Salir Ctrl + C\033[1;34m
[1] CrearUsuario \033[2;36m(Crear usuarios para SSH y OpenVPN)\033[1;34m
[2] RedefinirUsuario \033[2;36m(Opcion para modificar un usuario)\033[1;34m
[3] TransferirUsuarios \033[2;36m(Copiar usuarios para otros servidores)\033[1;34m
[4] DetalleUsuario \033[2;36m(Mostrar informacion de un unico usuario !!)\033[1;34m
[5] DetalleUsuarios \033[2;36m(Mostrar informacion de usuarios activos !!)\033[1;34m
[6] UsersInactivos \033[2;36m(Mostrar informacion de usuarios inactivos!!)\033[1;34m
[7] Speedtest \033[2;36m(Test de conexion [velocidad de banda])\033[1;34m
[8] SystemDetalles \033[2;36m(Detalles sobre el Sistema)\033[1;34m
[9] GraphicSystem \033[2;36m(Detalles sobre el VpsPack)\033[1;34m
[10] Ayuda \033[2;36m(Mostrar un grafico com informacion de sistema)\033[1;34m
[11] ConfigurarSquidOpensshDropbear \033[2;36m(Configuracion para Openssh y Dropbear)\1:34m
[12] Mas \033[2;36m(Mostrar mas opciones)\033[0m"
read -p "[1-10]: " opcao

case $opcao in
 1)
  Usercreate
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 2)
  UserRedefine
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPackk..."
  VpsPack;;
 3)
  transferirusers
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 4)
  detalhesuser
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 5)
  detalhesusers
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
  6)
  Usersinative
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 7)
  speedtest
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 8)
  systemdetalhes
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 9)
  htop
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 10)
  Ajuda
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 11)
 ConfigurarSquidOpensshDropbear
 read -n1 -r -p 
 VpsPack;;
 12)
  Mas
  read -n1 -r -p " Presione una tecla para abrir nuevamente VpsPack..."
  VpsPack;;
 
 *)
  id > /dev/null 2> /dev/null
esac

